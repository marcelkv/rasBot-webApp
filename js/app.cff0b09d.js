(function(){"use strict";var t={5342:function(t,e,n){var o=n(9242),i=n(3396);function r(t,e,n,o,r,s){const c=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(c)}var s=(0,i.aZ)({name:"App",beforeCreate(){document.title="RasBot"}}),c=n(89);const a=(0,c.Z)(s,[["render",r]]);var u=a,l=n(2483);const d={class:"home"};function h(t,e,n,o,r,s){const c=(0,i.up)("HeaderComponent"),a=(0,i.up)("JoyStickComponent");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(c),(0,i.Wm)(a)])}const v={class:"header"};function p(t,e,n,o,r,s){const c=(0,i.up)("LogOutIconComponent");return(0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("div",{class:"logOutButton",title:"Log Out",onMouseenter:e[0]||(e[0]=t=>o.isHovered=!0),onMouseleave:e[1]||(e[1]=t=>o.isHovered=!1),onClick:e[2]||(e[2]=(...t)=>o.onLogOutClick&&o.onLogOutClick(...t))},[(0,i.Wm)(c,{size:"40px",color:o.color},null,8,["color"])],32)])}n(7658);const f={class:"LogOutIcon"},g=["fill","height","width"],m=(0,i.uE)('<g stroke-width="0"></g><g stroke-linecap="round" stroke-linejoin="round"></g><g><g><g id="Sign_Out"><path d="M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03 C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03 C192.485,366.299,187.095,360.91,180.455,360.91z"></path><path d="M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279 c-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179 c4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z"></path></g><g></g><g></g><g></g><g></g><g></g><g></g></g></g>',3),_=[m];function y(t,e,n,o,r,s){return(0,i.wg)(),(0,i.iD)("div",f,[((0,i.wg)(),(0,i.iD)("svg",{class:"svg",fill:o.fillColor,height:n.size,width:n.size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384.971 384.971","xml:space":"preserve",stroke:"#ffffff"},_,8,g))])}var C={props:{size:{type:String,required:!0},color:{type:String,required:!1}},setup(t){const e=(0,i.Fl)((()=>t.color?t.color:"#ffffff"));return{fillColor:e}}};const w=(0,c.Z)(C,[["render",y]]);var I=w,b=n(4870),k={components:{LogOutIconComponent:I},setup(){let t=(0,b.iH)(!1);const e=(0,i.f3)("clientService"),n=(0,l.tv)(),o=(0,i.Fl)((()=>t.value?"red":"white"));function r(){e.isLoggedIn||n.push({name:"Connect"})}function s(){e.logOut(),r()}return(0,i.bv)((()=>r())),{color:o,isHovered:t,onLogOutClick:s}}};const S=(0,c.Z)(k,[["render",p],["__scopeId","data-v-f1328b9e"]]);var D=S,B=n(7139);const P={class:"joyStick"},x={ref:"ref_joyStickIn",class:"circleIn"};function O(t,e,n,o,r,s){return(0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",{ref:"ref_joyStickOut",class:"circleOut",style:(0,B.j5)(o.circleOutStyle),onTouchstart:e[0]||(e[0]=(...t)=>o.onTouchStart&&o.onTouchStart(...t)),onTouchmove:e[1]||(e[1]=(...t)=>o.onTouchMove&&o.onTouchMove(...t)),onTouchend:e[2]||(e[2]=(...t)=>o.onPointerUp&&o.onPointerUp(...t)),onMousedown:e[3]||(e[3]=(...t)=>o.onMouseDown&&o.onMouseDown(...t)),onMousemove:e[4]||(e[4]=(...t)=>o.onMouseMove&&o.onMouseMove(...t)),onMouseup:e[5]||(e[5]=(...t)=>o.onPointerUp&&o.onPointerUp(...t))},[(0,i._)("div",x,null,512)],36)])}var Z=n(7327);class L{constructor(t=0,e=0,n=0,o=0){(0,Z.Z)(this,"top",void 0),(0,Z.Z)(this,"left",void 0),(0,Z.Z)(this,"xPercent",void 0),(0,Z.Z)(this,"yPercent",void 0),this.left=t,this.top=e,this.xPercent=n,this.yPercent=o}}class M{get maxBorder(){return this._outerDiameter/2-this._innerDiameter*this._borderOffset}constructor(t,e,n,o){(0,Z.Z)(this,"_outerDiameter",void 0),(0,Z.Z)(this,"_innerDiameter",void 0),(0,Z.Z)(this,"_centerX",void 0),(0,Z.Z)(this,"_centerY",void 0),(0,Z.Z)(this,"_numberOfDecimals",0),(0,Z.Z)(this,"_borderOffset",.4),this.init(t,e,n,o)}init(t,e,n,o){this._outerDiameter=t,this._innerDiameter=e,this._centerX=o+t/2,this._centerY=n+t/2}getPosition(t,e){const n=t-this._centerX,o=e-this._centerY,i=Math.sqrt(n*n+o*o);let r=n,s=o;if(!this._isPointerInside(i)){const t=Math.atan2(o,n);r=Math.cos(t)*this.maxBorder,s=Math.sin(t)*this.maxBorder}r=this._roundDecimals(r),s=-1*this._roundDecimals(s);const c=this._roundDecimals(r/this.maxBorder*100),a=this._roundDecimals(s/this.maxBorder*100);return new L(r,s,c,a)}_isPointerInside(t){return t<=this.maxBorder}_roundDecimals(t){return parseFloat(t.toFixed(this._numberOfDecimals))}}class T{constructor(){(0,Z.Z)(this,"rasBotId",null),(0,Z.Z)(this,"joyStickPercentOffset",25),(0,Z.Z)(this,"innerDiameter",100),(0,Z.Z)(this,"outerDiameter",300),(0,Z.Z)(this,"innerColor","white"),(0,Z.Z)(this,"outerBorderColor","white"),(0,Z.Z)(this,"outerColor","#242625"),(0,Z.Z)(this,"throttleDelay_ms",800)}}var E={setup(){const t=(0,b.iH)(null),e=(0,b.iH)(null),n=(0,b.iH)(!1),o=(0,b.iH)(0),r=(0,b.iH)(0);let s,c=null;const a=(0,i.f3)("clientService");let u,l=!1;const d=a.settings??new T;(0,i.Jd)((()=>{k()}));const h=(0,i.Fl)((()=>({"--left":o.value+"px","--top":r.value+"px","--outerWidth":d.outerDiameter+"px","--innerWidth":d.innerDiameter+"px","--outerBorderColor":d.outerBorderColor,"--outerColor":d.outerColor,"--innerColor":d.innerColor})));function v(t){w(),f(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}function p(t){l||f(t.clientX,t.clientY)}function f(t,e){n.value=!0,C(),I(),S(t,e)}function g(t){w(),_(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}function m(t){l||_(t.clientX,t.clientY)}function _(t,e){n.value&&S(t,e)}async function y(){n.value=!1,k(),o.value=0,r.value=0,D(0,0)||(s=new L,await a.setPositionAsync(0,0))}function C(){const n=t.value,o=e.value;if(!n||!o)return;const i=n.getBoundingClientRect(),r=o.getBoundingClientRect();c=new M(i.width,r.width,i.top,i.left)}function w(){l=!0,clearTimeout(u),u=setTimeout((()=>l=!1),500)}function I(){document.addEventListener("resize",(()=>C())),document.addEventListener("touchmove",g),document.addEventListener("touchend",y),document.addEventListener("mousemove",m),document.addEventListener("mouseup",y)}function k(){document.removeEventListener("resize",(()=>C())),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)}function S(t,e){const n=c.getPosition(t,e);o.value=n.left,r.value=n.top,D(n.xPercent,n.yPercent)||(s=n,a.setPositionThrottled(n.xPercent,n.yPercent))}function D(t,e){return!!s&&(t===s.xPercent&&e===s.yPercent||Math.abs(t-s.xPercent)<d.joyStickPercentOffset&&Math.abs(e-s.yPercent)<d.joyStickPercentOffset)}return{ref_joyStickIn:e,ref_joyStickOut:t,circleOutStyle:h,onTouchStart:v,onTouchMove:g,onMouseDown:p,onMouseMove:m,onPointerUp:y}}};const H=(0,c.Z)(E,[["render",O],["__scopeId","data-v-7da551e8"]]);var j=H,A={components:{JoyStickComponent:j,HeaderComponent:D},setup(){return{}}};const z=(0,c.Z)(A,[["render",h],["__scopeId","data-v-4903dac0"]]);var R=z,F=n.p+"img/logo.4d296a4f.png";const U=t=>((0,i.dD)("data-v-75261644"),t=t(),(0,i.Cn)(),t),V=U((()=>(0,i._)("div",{class:"imageSection"},[(0,i._)("img",{class:"image",alt:"Vue logo",src:F})],-1))),X={class:"inputBoxSection"},Y=U((()=>(0,i._)("label",{for:"robotId"},null,-1))),q={key:0,class:"connectMsg"},J={key:0,class:"connectionError"},W=U((()=>(0,i._)("div",{class:"errorTitleItem"}," Oops! It seems you're currently offline. ",-1))),K=U((()=>(0,i._)("div",{class:"errorSecondaryItem center"}," Please check your internet connection and try again. ",-1))),G=[W,K],N={key:1,class:"connectionError"},Q=(0,i.uE)('<div class="errorTitleItem" data-v-75261644> Cannot establish a connection to RasBot. </div><div class="errorSecondaryItem" data-v-75261644> Possible reasons for the connection issue: </div><div class="errorSecondaryItem" data-v-75261644> 1. Please check if the RobotId is correct. </div><div class="errorSecondaryItem" data-v-75261644> 2. Ensure that RasBot is turned on. </div><div class="errorSecondaryItem" data-v-75261644> 3. Make sure RasBot is connected to the internet. </div><div class="errorSecondaryItem" data-v-75261644> Please verify these steps to resolve the connection problem. </div>',6),$=[Q];function tt(t,e,n,r,s,c){const a=(0,i.up)("SpinnerComponent");return(0,i.wg)(),(0,i.iD)("div",{class:"loginComponent",onClick:e[5]||(e[5]=(...t)=>r.onClickLoginComponent&&r.onClickLoginComponent(...t))},[V,(0,i._)("div",X,[Y,(0,i.wy)((0,i._)("input",{class:"inputBox inputSection",type:"text",id:"robotId","onUpdate:modelValue":e[0]||(e[0]=t=>r.textInput=t),onKeyup:[e[1]||(e[1]=(0,o.D2)(((...t)=>r.onClickConnect&&r.onClickConnect(...t)),["enter"])),e[2]||(e[2]=(0,o.D2)(((...t)=>r.onTab&&r.onTab(...t)),["tab"]))],placeholder:"Robot ID"},null,544),[[o.nr,r.textInput]]),(0,i._)("div",{tabindex:"0",ref:"connectButton",class:(0,B.C_)(["submitButton inputSection",{canConnect:r.canConnect}]),onClick:e[3]||(e[3]=(...t)=>r.onClickConnect&&r.onClickConnect(...t)),onKeyup:e[4]||(e[4]=(0,o.D2)(((...t)=>r.onClickConnect&&r.onClickConnect(...t)),["enter"]))},[r.isValidating?((0,i.wg)(),(0,i.j4)(a,{key:1,class:"spinner","is-loading":r.isValidating,"spinner-size":"20px"},null,8,["is-loading"])):((0,i.wg)(),(0,i.iD)("div",q,"Connect"))],34)]),r.hasError?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,B.C_)(["errorSection",{largeError:!r.hasInternetConnectionError}])},[(0,i._)("div",{class:(0,B.C_)(["errorWrapper",{isErrorReady:r.canRemoveError}])},[r.hasInternetConnectionError?((0,i.wg)(),(0,i.iD)("div",J,G)):((0,i.wg)(),(0,i.iD)("div",N,$))],2)],2)):(0,i.kq)("",!0)])}const et={key:0,class:"spinner"};function nt(t,e,n,o,r,s){return n.isLoading?((0,i.wg)(),(0,i.iD)("div",et,[(0,i._)("div",{class:"spinner-inner",style:(0,B.j5)({"--spinnerSize":n.spinnerSize})},null,4)])):(0,i.kq)("",!0)}var ot={props:{isLoading:{type:Boolean,required:!0},spinnerSize:{type:String,default:"30px"}}};const it=(0,c.Z)(ot,[["render",nt],["__scopeId","data-v-5d011efd"]]);var rt=it,st={components:{SpinnerComponent:rt},setup(){const t=(0,b.iH)(!1),e=(0,b.iH)(!1),n=(0,b.iH)(!1),o=(0,b.iH)(""),r=(0,b.iH)(!1),s=(0,b.iH)(null),c=(0,i.f3)("clientService"),a=(0,l.tv)(),u=(0,i.Fl)((()=>4===o.value.length));function d(t){u.value&&"Tab"===t?.key&&(t.preventDefault(),s.value?.focus())}async function h(){if(!u.value)return;const t=await v();t?await a.push({name:"Home"}):p()}async function v(){r.value=!0,e.value=!1;let t=!1;try{t=await(c?.logInAsync(o.value))}catch(n){e.value=!0}return r.value=!1,t}function p(){t.value=!0,setTimeout((()=>n.value=!0),200)}function f(){t.value&&n.value&&(t.value=!1,n.value=!1)}return(0,i.bv)((()=>{t.value=!1,n.value=!1,o.value="",r.value=!1})),{hasError:t,hasInternetConnectionError:e,canRemoveError:n,textInput:o,canConnect:u,isValidating:r,onTab:d,onClickConnect:h,onClickLoginComponent:f}}};const ct=(0,c.Z)(st,[["render",tt],["__scopeId","data-v-75261644"]]);var at=ct;const ut=[{path:"/connect",name:"Connect",component:at},{path:"/home",name:"Home",component:R},{path:"/:catchAll(.*)",redirect:"/home"}],lt=(0,l.p7)({history:(0,l.r5)("/rasBot-webApp/"),routes:ut});var dt=lt,ht=n(7795),vt=n(4287);let pt={apiKey:"",authDomain:"",projectId:"rasbot-44da5",storageBucket:"rasbot-44da5.appspot.com",messagingSenderId:"546171701856",appId:""};var ft=pt,gt=n(4806);class mt{constructor(){(0,Z.Z)(this,"_firebaseApp",null),(0,Z.Z)(this,"_firestore",void 0),(0,Z.Z)(this,"_rasBotCol",void 0),(0,Z.Z)(this,"_rasBotSettingsCol",void 0),(0,Z.Z)(this,"_robotId",null),(0,Z.Z)(this,"_rasBotDocId",null),(0,Z.Z)(this,"_settings",new T),(0,Z.Z)(this,"setPositionThrottled",(0,gt.throttle)(this._setPositionAsync,this.settings.throttleDelay_ms)),this._firebaseApp=(0,ht.ZF)(ft),this._firestore=(0,vt.ad)(this._firebaseApp),this._rasBotCol=(0,vt.hJ)(this._firestore,"rasBots"),this._rasBotSettingsCol=(0,vt.hJ)(this._firestore,"rasBotSettings")}get isLoggedIn(){return!!this._robotId&&!!this._rasBotDocId}get settings(){return this._settings}async logInAsync(t){return await this._initSettingsAsync(t),await this._logInAsync(t),this.isLoggedIn}logOut(){this._robotId=null,this._rasBotDocId=null}async setPositionAsync(t,e){this.setPositionThrottled.cancel(),await this._setPositionAsync(t,e)}async _logInAsync(t){const e=await(0,vt.PL)(this._rasBotCol),n=e.docs.find((e=>{const n=e.data();return n.rasBotId===t})),o=n?.data();o?(this._robotId=o.rasBotId,this._rasBotDocId=n.id):this._robotId=null}async _initSettingsAsync(t){const e=await(0,vt.PL)(this._rasBotSettingsCol),n=e.docs.find((e=>{const n=e.data();return n.rasBotId===t})),o=n?.data();o&&(this._settings=o)}async _setPositionAsync(t,e){if(this.isLoggedIn)try{const n=(0,vt.JU)(this._firestore,"rasBots",this._rasBotDocId);await(0,vt.r7)(n,{x:t,y:e,timeStamp:(0,vt.Bt)()})}catch(n){return}}}const _t=(0,o.ri)(u),yt=new mt;_t.provide("clientService",yt),_t.use(dt),_t.mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,r){if(!o){var s=1/0;for(l=0;l<t.length;l++){o=t[l][0],i=t[l][1],r=t[l][2];for(var c=!0,a=0;a<o.length;a++)(!1&r||s>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(c=!1,r<s&&(s=r));if(c){t.splice(l--,1);var u=i();void 0!==u&&(e=u)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[o,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.p="/rasBot-webApp/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,s=o[0],c=o[1],a=o[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(i in c)n.o(c,i)&&(n.m[i]=c[i]);if(a)var l=a(n)}for(e&&e(o);u<s.length;u++)r=s[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(l)},o=self["webpackChunkrasbot_webapp"]=self["webpackChunkrasbot_webapp"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5342)}));o=n.O(o)})();
//# sourceMappingURL=app.cff0b09d.js.map